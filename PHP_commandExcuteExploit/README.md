[这是一个很简单基础的漏洞,看不懂英文看这里!](./README_CN.md)
# illustrate
2023-1-4 1-16-51.mp4 video demonstrates how to easily execute arbitrary commands through php, the following is the description of the vulnerability

The code of index.php demonstrated in the video is
```php
<?php
$ip = $_GET['ip'];
$result = system("ping -c 4 $ip");
echo $result;
?>
```
It can be seen that the system function is executed. The function of the system function is to call the system command, which is a dangerous function. It is necessary to verify whether the input content is legal, but obviously there is no verification of legal content here, so it can be simply executed

```http://127.0.0.1/CommandExcuteExploit/index.php?ip=127.0.0.1```
This is the normal url

```http://127.0.0.1/CommandExcuteExploit/index.php?ip=127.0.0.1|cat /etc/passwd```
Obviously this is a url containing a malicious request. One more execution command is the cat command. The principle is the same as executing the command in the bash terminal. The normal url execution statement is like this
```ping -c 4 127.0.0.1```

But the url of the malicious request is like this
```ping -c 4 127.0.0.1| cat /etc/passwd```

After the explanation, the repair of the vulnerability is as follows, it is very simple, just need to add regular expression filter
```php
<?php
$ip = $_GET['ip'];
if (preg_match('/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/', $ip)) {
     $result = system("ping -c 4 $ip");
     echo $result;
} else {
     echo "Invalid IP address (invalid IP address)";
}
?>
```
> However, the domain name cannot be entered, because the regular expression here only allows the input of IP address specifications.
> Okay, this is a demonstration of executing arbitrary commands
